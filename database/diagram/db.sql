-- MySQL Script generated by MySQL Workbench
-- Thu Apr  6 18:31:16 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema b2tehvmetpgbl28kakfx
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema b2tehvmetpgbl28kakfx
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `b2tehvmetpgbl28kakfx` DEFAULT CHARACTER SET utf8mb4 ;
USE `b2tehvmetpgbl28kakfx` ;

-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`family`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`family` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`family` (
  `idfamily` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `code` BINARY(5) NOT NULL,
  `admin` INT NOT NULL,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `end` DATE NULL,
  PRIMARY KEY (`idfamily`),
  INDEX `fk_family_user1_idx` (`admin` ASC) VISIBLE,
  CONSTRAINT `fk_family_user1`
    FOREIGN KEY (`admin`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`s3`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`s3` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`s3` (
  `idobject` INT NOT NULL AUTO_INCREMENT,
  `name` BINARY(8) NOT NULL,
  `ext` VARCHAR(10) CHARACTER SET 'utf8' NULL,
  `owner` INT NOT NULL,
  `family` INT NULL,
  PRIMARY KEY (`idobject`),
  INDEX `fk_s3_user1_idx` (`owner` ASC) VISIBLE,
  INDEX `fk_s3_family1_idx` (`family` ASC) VISIBLE,
  CONSTRAINT `fk_s3_user1`
    FOREIGN KEY (`owner`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_s3_family1`
    FOREIGN KEY (`family`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`user` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`user` (
  `iduser` INT NOT NULL AUTO_INCREMENT,
  `email` VARCHAR(255) NOT NULL,
  `first_name` VARCHAR(255) NOT NULL DEFAULT '',
  `last_name` VARCHAR(255) NOT NULL DEFAULT '',
  `phone` VARCHAR(63) NOT NULL DEFAULT '',
  `birthdate` DATE NULL,
  `avatar` INT NULL,
  `theme` TINYINT NOT NULL DEFAULT 0,
  `autocorrect` TINYINT NOT NULL DEFAULT 1,
  `capitalize` TINYINT NOT NULL DEFAULT 1,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modified` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`iduser`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE,
  INDEX `fk_user_s31_idx` (`avatar` ASC) VISIBLE,
  CONSTRAINT `fk_user_s31`
    FOREIGN KEY (`avatar`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`gazette_type`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`gazette_type` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`gazette_type` (
  `idgazette_type` INT NOT NULL,
  `pages` TINYINT NOT NULL,
  PRIMARY KEY (`idgazette_type`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`subscription_type`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`subscription_type` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`subscription_type` (
  `idsubscription_type` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `price` DECIMAL(5,2) NOT NULL,
  `idgazette_type` INT NOT NULL,
  PRIMARY KEY (`idsubscription_type`),
  INDEX `fk_subscription_type_gazette_type1_idx` (`idgazette_type` ASC) VISIBLE,
  CONSTRAINT `fk_subscription_type_gazette_type1`
    FOREIGN KEY (`idgazette_type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`gazette_type` (`idgazette_type`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`family_has_member`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`family_has_member` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`family_has_member` (
  `idfamily` INT NOT NULL,
  `iduser` INT NOT NULL,
  `display_name` VARCHAR(255) NOT NULL,
  INDEX `fk_family_has_member_family_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_family_has_member_user1_idx` (`iduser` ASC) VISIBLE,
  CONSTRAINT `fk_family_has_member_family`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_family_has_member_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`address` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`address` (
  `idaddress` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL DEFAULT '',
  `phone` VARCHAR(63) NOT NULL DEFAULT '',
  `field1` VARCHAR(63) NOT NULL DEFAULT '',
  `field2` VARCHAR(63) NOT NULL DEFAULT '',
  `field3` VARCHAR(63) NOT NULL DEFAULT '',
  `postal` VARCHAR(63) NOT NULL DEFAULT '',
  `city` VARCHAR(63) NOT NULL DEFAULT '',
  `state` VARCHAR(63) NOT NULL DEFAULT '',
  `country` VARCHAR(63) NOT NULL DEFAULT '',
  PRIMARY KEY (`idaddress`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`recipient`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`recipient` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`recipient` (
  `idrecipient` INT NOT NULL AUTO_INCREMENT,
  `idfamily` INT NOT NULL,
  `iduser` INT NULL,
  `display_name` VARCHAR(63) NOT NULL DEFAULT '',
  `avatar` INT NULL,
  `birthdate` DATE NOT NULL,
  `idaddress` INT NOT NULL,
  `referent` INT NOT NULL,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modified` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX `fk_family_has_recipient_family1_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_family_has_recipient_user1_idx` (`iduser` ASC) VISIBLE,
  PRIMARY KEY (`idrecipient`),
  INDEX `fk_recipient_address1_idx` (`idaddress` ASC) VISIBLE,
  INDEX `fk_recipient_user1_idx` (`referent` ASC) VISIBLE,
  INDEX `fk_recipient_s31_idx` (`avatar` ASC) VISIBLE,
  CONSTRAINT `fk_family_has_recipient_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_family_has_recipient_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipient_address1`
    FOREIGN KEY (`idaddress`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`address` (`idaddress`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipient_user1`
    FOREIGN KEY (`referent`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipient_s31`
    FOREIGN KEY (`avatar`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`subscription`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`subscription` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`subscription` (
  `idsubscription` INT NOT NULL AUTO_INCREMENT,
  `idrecipient` INT NOT NULL,
  `idsubscription_type` INT NOT NULL,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`idsubscription`),
  INDEX `fk_subscription_subscription_type1_idx` (`idsubscription_type` ASC) VISIBLE,
  INDEX `fk_subscription_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  CONSTRAINT `fk_subscription_subscription_type1`
    FOREIGN KEY (`idsubscription_type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`subscription_type` (`idsubscription_type`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_subscription_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`user_has_payment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`user_has_payment` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`user_has_payment` (
  `iduser` INT NOT NULL,
  `idsubscription` INT NULL,
  `date` DATE NOT NULL,
  `amount` DECIMAL(5,2) NOT NULL,
  `paid` TINYINT NOT NULL DEFAULT 0,
  INDEX `fk_user_has_payment_user1_idx` (`iduser` ASC) VISIBLE,
  INDEX `fk_user_has_payment_subscription1_idx` (`idsubscription` ASC) VISIBLE,
  CONSTRAINT `fk_user_has_payment_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_has_payment_subscription1`
    FOREIGN KEY (`idsubscription`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`subscription` (`idsubscription`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`publication_type`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`publication_type` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`publication_type` (
  `idpublication_type` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(63) NOT NULL,
  PRIMARY KEY (`idpublication_type`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`layout`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`layout` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`layout` (
  `idlayout` INT NOT NULL AUTO_INCREMENT,
  `identifier` VARCHAR(45) NOT NULL DEFAULT 'a',
  `description` VARCHAR(45) NOT NULL DEFAULT '',
  `quantity` TINYINT NOT NULL DEFAULT 1,
  `orientation` TINYINT NOT NULL DEFAULT 0,
  `full_page` TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (`idlayout`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`background`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`background` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`background` (
  `idbackground` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(63) NOT NULL DEFAULT '',
  `idobject` INT NOT NULL,
  `full_page` TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (`idbackground`),
  INDEX `fk_background_s31_idx` (`idobject` ASC) VISIBLE,
  CONSTRAINT `fk_background_s31`
    FOREIGN KEY (`idobject`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`publication`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`publication` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`publication` (
  `idpublication` INT NOT NULL AUTO_INCREMENT,
  `author` INT NOT NULL,
  `idfamily` INT NOT NULL,
  `type` INT NOT NULL DEFAULT 1,
  `idlayout` INT NOT NULL DEFAULT 1,
  `idbackground` INT NULL,
  `title` VARCHAR(255) NOT NULL DEFAULT '',
  `description` VARCHAR(511) NOT NULL DEFAULT '',
  `full_page` TINYINT NOT NULL DEFAULT 0,
  `private` TINYINT NOT NULL DEFAULT 0,
  `created` TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
  `modified` TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3) ON UPDATE CURRENT_TIMESTAMP(3),
  PRIMARY KEY (`idpublication`),
  INDEX `fk_publication_publication_type1_idx` (`type` ASC) VISIBLE,
  INDEX `fk_publication_user1_idx` (`author` ASC) VISIBLE,
  INDEX `fk_publication_family1_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_publication_layout1_idx` (`idlayout` ASC) VISIBLE,
  INDEX `fk_publication_background1_idx` (`idbackground` ASC) VISIBLE,
  CONSTRAINT `fk_publication_publication_type1`
    FOREIGN KEY (`type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication_type` (`idpublication_type`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_user1`
    FOREIGN KEY (`author`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_layout1`
    FOREIGN KEY (`idlayout`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`)
    ON DELETE RESTRICT
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_background1`
    FOREIGN KEY (`idbackground`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`background` (`idbackground`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`movie`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`movie` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`movie` (
  `idmovie` INT NOT NULL,
  `idpublication` INT NOT NULL,
  `idobject` INT NOT NULL,
  `title` VARCHAR(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`idmovie`),
  INDEX `fk_movie_publication1_idx` (`idpublication` ASC) VISIBLE,
  INDEX `fk_movie_s31_idx` (`idobject` ASC) VISIBLE,
  CONSTRAINT `fk_movie_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_movie_s31`
    FOREIGN KEY (`idobject`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`publication_has_picture`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`publication_has_picture` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`publication_has_picture` (
  `idpublication` INT NOT NULL,
  `idobject` INT NOT NULL,
  `place` TINYINT NOT NULL DEFAULT 0,
  `title` VARCHAR(255) NOT NULL DEFAULT '',
  INDEX `fk_publication_has_picture_publication1_idx` (`idpublication` ASC) VISIBLE,
  INDEX `fk_publication_has_picture_s31_idx` (`idobject` ASC) VISIBLE,
  CONSTRAINT `fk_publication_has_picture_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_has_picture_s31`
    FOREIGN KEY (`idobject`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`text`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`text` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`text` (
  `idtext` INT NOT NULL AUTO_INCREMENT,
  `idpublication` INT NOT NULL,
  `content` TEXT NOT NULL,
  PRIMARY KEY (`idtext`),
  INDEX `fk_text_publication1_idx` (`idpublication` ASC) VISIBLE,
  CONSTRAINT `fk_text_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`gazette`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`gazette` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`gazette` (
  `idgazette` INT NOT NULL AUTO_INCREMENT,
  `idfamily` INT NOT NULL,
  `idobject` INT NULL,
  `type` INT NOT NULL DEFAULT 1,
  `printed` TINYINT NOT NULL DEFAULT 0,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modified` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `print_date` DATE NOT NULL,
  PRIMARY KEY (`idgazette`),
  INDEX `fk_gazette_s31_idx` (`idobject` ASC) VISIBLE,
  INDEX `fk_gazette_family1_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_gazette_gazette_type1_idx` (`type` ASC) VISIBLE,
  CONSTRAINT `fk_gazette_s31`
    FOREIGN KEY (`idobject`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gazette_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gazette_gazette_type1`
    FOREIGN KEY (`type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`gazette_type` (`idgazette_type`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`publication_has_like`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`publication_has_like` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`publication_has_like` (
  `idpublication` INT NOT NULL,
  `iduser` INT NOT NULL,
  INDEX `fk_publication_has_like_publication1_idx` (`idpublication` ASC) VISIBLE,
  INDEX `fk_publication_has_like_user1_idx` (`iduser` ASC) VISIBLE,
  CONSTRAINT `fk_publication_has_like_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_has_like_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`comment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`comment` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`comment` (
  `idcomment` INT NOT NULL AUTO_INCREMENT,
  `iduser` INT NOT NULL,
  `content` VARCHAR(255) NOT NULL,
  `created` TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
  `modified` TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP(3) ON UPDATE CURRENT_TIMESTAMP(3),
  PRIMARY KEY (`idcomment`),
  INDEX `fk_comment_user1_idx` (`iduser` ASC) VISIBLE,
  CONSTRAINT `fk_comment_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`publication_has_comment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`publication_has_comment` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`publication_has_comment` (
  `idpublication` INT NOT NULL,
  `idcomment` INT NOT NULL,
  INDEX `fk_publication_has_comment_publication1_idx` (`idpublication` ASC) VISIBLE,
  INDEX `fk_publication_has_comment_comment1_idx` (`idcomment` ASC) VISIBLE,
  CONSTRAINT `fk_publication_has_comment_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_publication_has_comment_comment1`
    FOREIGN KEY (`idcomment`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`comment` (`idcomment`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`comment_has_like`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`comment_has_like` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`comment_has_like` (
  `idcomment` INT NOT NULL,
  `iduser` INT NOT NULL,
  INDEX `fk_comment_has_like_comment1_idx` (`idcomment` ASC) VISIBLE,
  INDEX `fk_comment_has_like_user1_idx` (`iduser` ASC) VISIBLE,
  CONSTRAINT `fk_comment_has_like_comment1`
    FOREIGN KEY (`idcomment`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`comment` (`idcomment`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_comment_has_like_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`recurring_payment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`recurring_payment` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`recurring_payment` (
  `iduser` INT NOT NULL,
  `idsubscription` INT NOT NULL,
  `amount` DECIMAL(5,2) NOT NULL,
  `created` TIMESTAMP NOT NULL,
  INDEX `fk_recurring_payment_user1_idx` (`iduser` ASC) VISIBLE,
  INDEX `fk_recurring_payment_subscription1_idx` (`idsubscription` ASC) VISIBLE,
  CONSTRAINT `fk_recurring_payment_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recurring_payment_subscription1`
    FOREIGN KEY (`idsubscription`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`subscription` (`idsubscription`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`google_key`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`google_key` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`google_key` (
  `idgoogle_key` BINARY(40) NOT NULL,
  `content` VARCHAR(2047) NOT NULL,
  `expiration` TIMESTAMP NOT NULL,
  PRIMARY KEY (`idgoogle_key`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`firebase_has_user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`firebase_has_user` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`firebase_has_user` (
  `idfirebase_user` INT NOT NULL AUTO_INCREMENT,
  `iduser` INT NOT NULL,
  `uidfirebase` VARCHAR(63) NOT NULL,
  `name` VARCHAR(255) NOT NULL DEFAULT '',
  `email` VARCHAR(255) NOT NULL DEFAULT '',
  INDEX `fk_firebase_uid_user1_idx` (`iduser` ASC) VISIBLE,
  PRIMARY KEY (`idfirebase_user`),
  CONSTRAINT `fk_firebase_uid_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`default_family`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`default_family` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`default_family` (
  `iduser` INT NOT NULL,
  `idfamily` INT NOT NULL,
  INDEX `fk_default_family_user1_idx` (`iduser` ASC) VISIBLE,
  INDEX `fk_default_family_family1_idx` (`idfamily` ASC) VISIBLE,
  PRIMARY KEY (`iduser`),
  CONSTRAINT `fk_default_family_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_default_family_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`family_invitation`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`family_invitation` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`family_invitation` (
  `idfamily` INT NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `invitee` INT NULL,
  `inviter` INT NOT NULL,
  `approved` TINYINT NOT NULL DEFAULT 0,
  `accepted` TINYINT NOT NULL DEFAULT 0,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  INDEX `fk_family_request_family1_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_family_invitation_user1_idx` (`inviter` ASC) VISIBLE,
  INDEX `fk_family_invitation_user2_idx` (`invitee` ASC) VISIBLE,
  CONSTRAINT `fk_family_request_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_family_invitation_user1`
    FOREIGN KEY (`inviter`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_family_invitation_user2`
    FOREIGN KEY (`invitee`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`family_request`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`family_request` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`family_request` (
  `idfamily` INT NOT NULL,
  `iduser` INT NOT NULL,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  INDEX `fk_family_request_family2_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_family_request_user1_idx` (`iduser` ASC) VISIBLE,
  CONSTRAINT `fk_family_request_family2`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_family_request_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`recipient_has_publication`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`recipient_has_publication` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`recipient_has_publication` (
  `idrecipient` INT NOT NULL,
  `idpublication` INT NOT NULL,
  INDEX `fk_recipient_has_publication_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  INDEX `fk_recipient_has_publication_publication1_idx` (`idpublication` ASC) VISIBLE,
  CONSTRAINT `fk_recipient_has_publication_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_recipient_has_publication_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`user_unseen_comment`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`user_unseen_comment` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`user_unseen_comment` (
  `iduser` INT NOT NULL,
  `idcomment` INT NOT NULL,
  INDEX `fk_user_seen_comment_user1_idx` (`iduser` ASC) VISIBLE,
  INDEX `fk_user_seen_comment_comment1_idx` (`idcomment` ASC) VISIBLE,
  CONSTRAINT `fk_user_seen_comment_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_seen_comment_comment1`
    FOREIGN KEY (`idcomment`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`comment` (`idcomment`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`user_unseen_publication`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`user_unseen_publication` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`user_unseen_publication` (
  `iduser` INT NOT NULL,
  `idpublication` INT NOT NULL,
  INDEX `fk_user_seen_publication_user1_idx` (`iduser` ASC) VISIBLE,
  INDEX `fk_user_seen_publication_publication1_idx` (`idpublication` ASC) VISIBLE,
  CONSTRAINT `fk_user_seen_publication_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_seen_publication_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`user_unseen_member`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`user_unseen_member` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`user_unseen_member` (
  `iduser` INT NOT NULL,
  `member` INT NOT NULL,
  `idfamily` INT NOT NULL,
  INDEX `fk_user_unseen_member_user1_idx` (`iduser` ASC) VISIBLE,
  INDEX `fk_user_unseen_member_user2_idx` (`member` ASC) VISIBLE,
  INDEX `fk_user_unseen_member_family1_idx` (`idfamily` ASC) VISIBLE,
  CONSTRAINT `fk_user_unseen_member_user1`
    FOREIGN KEY (`iduser`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_unseen_member_user2`
    FOREIGN KEY (`member`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_user_unseen_member_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`game_type`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`game_type` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`game_type` (
  `idgame_type` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idgame_type`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`game_difficulty`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`game_difficulty` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`game_difficulty` (
  `idgame_difficulty` INT NOT NULL,
  `name` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`idgame_difficulty`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`game`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`game` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`game` (
  `idgame` INT NOT NULL AUTO_INCREMENT,
  `idobject` INT NOT NULL,
  `type` INT NOT NULL,
  `difficulty` INT NOT NULL,
  `full_page` TINYINT NOT NULL DEFAULT 0,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`idgame`),
  INDEX `fk_game_s31_idx` (`idobject` ASC) VISIBLE,
  INDEX `fk_game_game_type1_idx` (`type` ASC) VISIBLE,
  INDEX `fk_game_game_difficulty1_idx` (`difficulty` ASC) VISIBLE,
  CONSTRAINT `fk_game_s31`
    FOREIGN KEY (`idobject`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`s3` (`idobject`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_game_game_type1`
    FOREIGN KEY (`type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `fk_game_game_difficulty1`
    FOREIGN KEY (`difficulty`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`song`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`song` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`song` (
  `idsong` INT NOT NULL AUTO_INCREMENT,
  `title` VARCHAR(255) NOT NULL,
  `content` TEXT NOT NULL,
  `link` VARCHAR(511) NULL,
  PRIMARY KEY (`idsong`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`gazette_page`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`gazette_page` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`gazette_page` (
  `idgazette` INT NOT NULL,
  `page_num` TINYINT NOT NULL DEFAULT 1,
  `place` TINYINT NOT NULL DEFAULT 1,
  `idrecipient` INT NULL,
  `idpublication` INT NULL,
  `idgame` INT NULL,
  `idsong` INT NULL,
  INDEX `fk_gazette_page_gazette1_idx` (`idgazette` ASC) VISIBLE,
  INDEX `fk_gazette_page_publication1_idx` (`idpublication` ASC) VISIBLE,
  INDEX `fk_gazette_page_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  INDEX `fk_gazette_page_game1_idx` (`idgame` ASC) VISIBLE,
  INDEX `fk_gazette_page_song1_idx` (`idsong` ASC) VISIBLE,
  CONSTRAINT `fk_gazette_page_gazette1`
    FOREIGN KEY (`idgazette`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`gazette` (`idgazette`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gazette_page_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gazette_page_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gazette_page_game1`
    FOREIGN KEY (`idgame`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game` (`idgame`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gazette_page_song1`
    FOREIGN KEY (`idsong`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`song` (`idsong`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`notification`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`notification` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`notification` (
  `idnotification` INT NOT NULL AUTO_INCREMENT,
  `type` TINYINT NOT NULL,
  `idfamily` INT NOT NULL,
  `notifiee` INT NOT NULL,
  `notifying` INT NULL,
  `idpublication` INT NULL,
  `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`idnotification`),
  INDEX `fk_notification_user1_idx` (`notifiee` ASC) VISIBLE,
  INDEX `fk_notification_user2_idx` (`notifying` ASC) VISIBLE,
  INDEX `fk_notification_family1_idx` (`idfamily` ASC) VISIBLE,
  INDEX `fk_notification_publication1_idx` (`idpublication` ASC) VISIBLE,
  CONSTRAINT `fk_notification_user1`
    FOREIGN KEY (`notifiee`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_notification_user2`
    FOREIGN KEY (`notifying`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`user` (`iduser`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_notification_family1`
    FOREIGN KEY (`idfamily`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`family` (`idfamily`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_notification_publication1`
    FOREIGN KEY (`idpublication`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`publication` (`idpublication`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`recipient_has_game`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`recipient_has_game` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`recipient_has_game` (
  `idrecipient` INT NOT NULL,
  `idgame` INT NOT NULL,
  `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  INDEX `fk_recipient_has_game_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  INDEX `fk_recipient_has_game_game1_idx` (`idgame` ASC) VISIBLE,
  CONSTRAINT `fk_recipient_has_game_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipient_has_game_game1`
    FOREIGN KEY (`idgame`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game` (`idgame`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`recipient_has_song`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`recipient_has_song` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`recipient_has_song` (
  `idrecipient` INT NOT NULL,
  `idsong` INT NOT NULL,
  `date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  INDEX `fk_recipient_has_song_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  INDEX `fk_recipient_has_song_song1_idx` (`idsong` ASC) VISIBLE,
  CONSTRAINT `fk_recipient_has_song_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipient_has_song_song1`
    FOREIGN KEY (`idsong`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`song` (`idsong`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`exclude_game_type`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`exclude_game_type` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`exclude_game_type` (
  `idrecipient` INT NOT NULL,
  `idgame_type` INT NOT NULL,
  INDEX `fk_exclude_game_type_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  INDEX `fk_exclude_game_type_game_type1_idx` (`idgame_type` ASC) VISIBLE,
  CONSTRAINT `fk_exclude_game_type_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_exclude_game_type_game_type1`
    FOREIGN KEY (`idgame_type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `b2tehvmetpgbl28kakfx`.`recipent_game_difficulty`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `b2tehvmetpgbl28kakfx`.`recipent_game_difficulty` ;

CREATE TABLE IF NOT EXISTS `b2tehvmetpgbl28kakfx`.`recipent_game_difficulty` (
  `idrecipient` INT NOT NULL,
  `idgame_type` INT NOT NULL,
  `idgame_difficulty` INT NOT NULL,
  INDEX `fk_recipent_game_difficulty_recipient1_idx` (`idrecipient` ASC) VISIBLE,
  INDEX `fk_recipent_game_difficulty_game_type1_idx` (`idgame_type` ASC) VISIBLE,
  INDEX `fk_recipent_game_difficulty_game_difficulty1_idx` (`idgame_difficulty` ASC) VISIBLE,
  CONSTRAINT `fk_recipent_game_difficulty_recipient1`
    FOREIGN KEY (`idrecipient`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`recipient` (`idrecipient`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipent_game_difficulty_game_type1`
    FOREIGN KEY (`idgame_type`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_recipent_game_difficulty_game_difficulty1`
    FOREIGN KEY (`idgame_difficulty`)
    REFERENCES `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `b2tehvmetpgbl28kakfx`.`gazette_type`
-- -----------------------------------------------------
START TRANSACTION;
USE `b2tehvmetpgbl28kakfx`;
INSERT INTO `b2tehvmetpgbl28kakfx`.`gazette_type` (`idgazette_type`, `pages`) VALUES (1, 16);
INSERT INTO `b2tehvmetpgbl28kakfx`.`gazette_type` (`idgazette_type`, `pages`) VALUES (2, 32);

COMMIT;


-- -----------------------------------------------------
-- Data for table `b2tehvmetpgbl28kakfx`.`subscription_type`
-- -----------------------------------------------------
START TRANSACTION;
USE `b2tehvmetpgbl28kakfx`;
INSERT INTO `b2tehvmetpgbl28kakfx`.`subscription_type` (`idsubscription_type`, `name`, `price`, `idgazette_type`) VALUES (1, 'Mensuel', 5.99, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `b2tehvmetpgbl28kakfx`.`publication_type`
-- -----------------------------------------------------
START TRANSACTION;
USE `b2tehvmetpgbl28kakfx`;
INSERT INTO `b2tehvmetpgbl28kakfx`.`publication_type` (`idpublication_type`, `name`) VALUES (1, 'journal');
INSERT INTO `b2tehvmetpgbl28kakfx`.`publication_type` (`idpublication_type`, `name`) VALUES (2, 'pictures');

COMMIT;


-- -----------------------------------------------------
-- Data for table `b2tehvmetpgbl28kakfx`.`layout`
-- -----------------------------------------------------
START TRANSACTION;
USE `b2tehvmetpgbl28kakfx`;
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (3, 'hjl2a', DEFAULT, 2, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (4, 'hjl3a', DEFAULT, 3, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (6, 'hjp1a', DEFAULT, 1, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (7, 'hjp2a', DEFAULT, 2, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (8, 'hjp3a', DEFAULT, 3, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (2, 'hjl1a', DEFAULT, 1, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (9, 'hpl1a', DEFAULT, 1, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (10, 'hpl2a', DEFAULT, 2, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (11, 'hpl2b', DEFAULT, 2, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (12, 'hpl2c', DEFAULT, 2, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (13, 'hpl3a', DEFAULT, 3, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (14, 'hpl3b', DEFAULT, 3, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (15, 'hpl3c', DEFAULT, 3, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (16, 'hpp1a', DEFAULT, 1, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (17, 'hpp2a', DEFAULT, 2, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (18, 'hpp2b', DEFAULT, 2, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (19, 'hpp3a', DEFAULT, 3, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (20, 'hpp3b', DEFAULT, 3, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (21, 'hpp3c', DEFAULT, 3, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (22, 'hpp3d', DEFAULT, 3, 2, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (1, 'hjl0a', DEFAULT, 0, 1, 0);
INSERT INTO `b2tehvmetpgbl28kakfx`.`layout` (`idlayout`, `identifier`, `description`, `quantity`, `orientation`, `full_page`) VALUES (5, 'hjp0a', DEFAULT, 0, 2, 0);

COMMIT;


-- -----------------------------------------------------
-- Data for table `b2tehvmetpgbl28kakfx`.`game_type`
-- -----------------------------------------------------
START TRANSACTION;
USE `b2tehvmetpgbl28kakfx`;
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (1, 'Anagrammes');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (2, 'Mots casés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (3, 'Mots codés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (4, 'Mots coupés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (5, 'Mots croisés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (6, 'Mots fléchés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (7, 'Mots mêlés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (8, 'Nombres croisés');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (9, 'Pyramide');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (10, 'Quiz');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (11, 'Rikudo');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (12, 'Sudoku');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_type` (`idgame_type`, `name`) VALUES (13, 'Wordoku');

COMMIT;


-- -----------------------------------------------------
-- Data for table `b2tehvmetpgbl28kakfx`.`game_difficulty`
-- -----------------------------------------------------
START TRANSACTION;
USE `b2tehvmetpgbl28kakfx`;
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`, `name`) VALUES (1, 'Trés facile');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`, `name`) VALUES (2, 'Facile');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`, `name`) VALUES (3, 'Moyen');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`, `name`) VALUES (4, 'Difficile');
INSERT INTO `b2tehvmetpgbl28kakfx`.`game_difficulty` (`idgame_difficulty`, `name`) VALUES (5, 'Très difficile');

COMMIT;

